function content_download(e,t,a){return void 0===a&&(a=!0),void 0===t&&(t="html"),$.ajax({url:e.site_url?e.site_url:"",dataType:t,data:$.extend(e,oParam.ajax_salt),method:"POST",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;fttm_progress_bar(t)}},!1),e}}).fail(function(e){a&&fttm_alerts({error:{text:"Connect error"}})}).done(function(e){a&&fttm_alerts(e);var t=500;e.success&&e.success.location_time&&(t=e.success.location_time),e.location_time&&(t=e.location_time),e.location&&setTimeout(function(){window.location.replace(e.location)},t),(e.location_reload||e.success&&e.success.location_reload)&&setTimeout(function(){location.reload()},t),e.success&&e.success.location&&setTimeout(function(){window.location.replace(e.success.location)},t),e.error&&e.error.location&&setTimeout(function(){window.location.replace(e.error.location)},t)})}$(function(){$(document).find("form:not(.__no_ajax)").on("submit",function(){var e=$(this);return oData=e.serializeArray(),$.when(content_download(oData,"json",!0)).done(function(t){if(!t.success)return!1;t.success.model&&localStorage.setItem(t.success.model,JSON.stringify(t.success.data));var a=1e3;if(t.success&&t.success.location_time&&(a=t.success.location_time),t.success.location&&setTimeout(function(){window.location.replace(t.success.location)},a),t.success.location_reload&&setTimeout(function(){location.reload()},a),e.hasClass("reload_page")&&location.reload(),e.hasClass("content_loader_form"))switch(t.success.event){case"save":case"reload":e.find(".form_reset").click(),content_loader_update(t.success.data);break;case"add":e.find(".form_reset").click(),content_loader_add(t.success.data);break;case"del":content_loader_del(t.success.data)}}),!1}),$(document).on("click",".form_reset",function(){var e=$(this).parents("form");e[0].reset(),e.find("[name=id]").val(""),e.find("[type=submit]").html('<i class="fas fa-plus-square"></i> Add'),$(document).find("#content_loader_to ._edit_").removeClass("_edit_"),e.removeClassWild("animate_*"),setTimeout(function(){e.addClass("animate__animated animate__rubberBand")},100)}),$(document).on("click",".content_download",function(){var e=$(this),t=e.data().animate_class?e.data().animate_class:"animate__zoomOut",a={action:$(this).data().action,form:$(this).data().form,id:$(this).data().id};if("del"==e.data().form){if(!confirm("Confirm delete"))return!1;if(!e.data().elem)return fttm_alerts({error:"Not have class delete :( attr data-elem"});e.parents(e.data().elem).removeClassWild("animate_*").addClass("animate__animated "+t),setTimeout(function(){e.parents(e.data().elem).remove()},500)}if("edit"==e.data().form)return a.form="show",e.parents(e.data().elem).addClass("_edit_").siblings().removeClass("_edit_"),$.when(content_download(a,"json",!1)).then(function(e){$(document).find("form").each(function(){var t=e.type?e.type:0;if(("."+$(this).data().content_download_edit_type).indexOf(t)>0)return oEditForm=$(this)});for(var a in e){var o=oEditForm.find('[name="'+a+'"]');o.hasClass("select")&&o.find('[value="'+e[a]+'"]').prop("selected",!0),o.val(e[a])}oEditForm.find("[type=submit]").html('<i class="fas fa-pen-square"></i> Save'),oEditForm.removeClassWild("animate_*"),setTimeout(function(){oEditForm.addClass("animate__animated "+t)},100),oCollapse=oEditForm.parents(".accordion"),oCollapse.find(".accordion-button").hasClass("collapsed")&&oCollapse.find(".accordion-button").click()}),!1;$.when(content_download(a,"json")).then(function(e){})})});