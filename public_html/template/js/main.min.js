function content_download(t,e,a){return site_url=t.site_url?t.site_url:"",void 0===a&&(a=!0),void 0===e&&(e="html"),$.ajax({url:site_url,dataType:e,data:$.extend(t,oParam.ajax_salt),method:"POST"}).fail(function(t){a&&fttm_alerts({error:{text:"Ошибка соединения"}})}).done(function(t){a&&fttm_alerts(t)})}function fttm_alerts(t,e){var a=$(document).find(".fttm_alerts");return e.length&&(a=e.find("._fttm_alerts")),t.success&&t.success.text?a.html(fttm_alerts_html(t.success.text,"alert-success")):t.error&&t.error.text?a.html(fttm_alerts_html(t.error.text,"alert-danger")):t.alert&&t.alert.text?a.html(fttm_alerts_html(t.alert.text,"alert-alert")):t.success?a.html(fttm_alerts_html(t.success,"alert-success")):t.error?a.html(fttm_alerts_html(t.error,"alert-danger")):t.alert?a.html(fttm_alerts_html(t.alert,"alert-alert")):void console.log(t)}function fttm_alerts_html(t,e){var a="";return a+='<div class="alert '+(e||"alert-primary")+' alert-dismissible fade show" role="alert">',a+=t,a+='<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',a+="</div>"}oParam={},oParam.ajax_salt={app:"app"},oParam.site_url="/",$(function(){$(document).on("click",".content_download",function(){var t={action:$(this).data().action,form:$(this).data().form,id:$(this).data().id};if("del"==$(this).data().form){if(!confirm("Подтвердите удаление"))return!1;$(this).parents(".col").remove()}$.when(content_download(t,"json")).then(function(t){fttm_alerts(t)})}),$(document).find("form").on("submit",function(){var t=$(this);return oData=t.serializeArray(),$.when(content_download(oData,"json",!1)).then(function(e){fttm_alerts(e,t),e.model&&localStorage.setItem(e.model,JSON.stringify(e.data))}),!1})});