function content_loader_init(){$(document).on("click",".content_loader",function(){content_loader($(this))})}function content_loader(t,n,o){void 0===n&&(n={}),void 0===o&&(o={}),oButton=t,n.action=t.attr("data-content_loader_action")?t.attr("data-content_loader_action"):n.action,n.form=t.attr("data-content_loader_form")?t.attr("data-content_loader_form"):n.table,n.to=t.attr("data-content_loader_to")?t.attr("data-content_loader_to"):n.to,n.from=t.attr("data-content_loader_from")?t.attr("data-content_loader_from"):n.from,n.limit=t.attr("data-content_loader_limit")?t.attr("data-content_loader_limit"):n.limit,n.template=t.attr("data-content_loader_template")?t.attr("data-content_loader_template"):n.template,n.position=t.attr("data-content_loader_position")?t.attr("data-content_loader_position"):n.position;var e=n.action,a=n.form,r=n.to,i=parseInt(n.from),d=parseInt(n.limit),l=$(document).find(n.template),_=n.position;if(o.id)if(l){var c=$(document).find(r).find('[data-content_loader_item_id="'+o.id+'"]');c.length?(c.after(content_loader_template(l,o)),c.remove(),oButton.find("[name=id]").val(""),oButton.find("[type=submit]").html('<i class="fas fa-plus-square"></i> Добавить'),oButton.removeClassWild("animate_*"),setTimeout(function(){oButton.addClass("animate__animated animate__rubberBand")},100)):setTimeout(function(){_?$(document).find(r).append(content_loader_template(l,o)):$(document).find(r).prepend(content_loader_template(l,o))},100)}else fttm_alerts({alert:"Шаблон не найден"});else{o={action:e,form:a,from:i,limit:d};$.when(content_download(o,"json",!1)).then(function(t){t.length?(l?$.each(t,function(t,n){var o=$(this)[0];setTimeout(function(){_?$(document).find(r).append(content_loader_template(l,o)):$(document).find(r).prepend(content_loader_template(l,o))},100*t)}):fttm_alerts({alert:"Шаблон не найден"}),d>t.length?oButton.remove():oButton.attr("data-content_loader_from",i+d)):oButton.remove()})}}function content_loader_template(t,n){var o=[],e=[],a=$(t)[0].innerHTML;for(var r in n)o.push(r),e.push(n[r]);for(var i=0;i<o.length;i++)a=a.split("{{"+o[i]+"}}").join(e[i]);return a}content_loader_init();